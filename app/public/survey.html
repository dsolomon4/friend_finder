<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
        crossorigin="anonymous">



    <title>Friend Finder</title>
</head>

<body>
    <div class="container">
        <div class="card" style="margin: 60px">
            <div class="card-body">
                <h2 class="card-title"> Survey Questions
                    <hr>
                </h2>

                <div>
                    <h4>About you...</h4>
                    <hr>
                </div>
                <form id="survey-form">
                    <div class="form-group">
                        <label for="nameInput">
                            <h6>Name (Required)</h6>
                        </label>
                        <input type="text" class="form-control" id="nameInput">
                    </div>
                    <div class="form-group">
                        <label for="imageInput">
                            <h6>Link to Photo Image (Required)</h6>
                        </label>
                        <input type="text" class="form-control" id="imageInput">
                    </div>
                    <hr>
                    <div>
                        <h4> Question 1</h4>
                        <h6> * You love to travel *</h6>
                        <select class="custom-select" id="answer-1" style="width:200px">

                            <option selected>Select an Option</option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2 </option>
                            <option value="3">3</option>
                            <option value="4">4 </option>
                            <option value="5">5 (Strongly Agree) </option>
                        </select>
                        <br><br>
                    </div>
                    <div>
                        <h4> Question 2</h4>
                        <h6> * You would rather stay home then go out dancing *</h6>
                        <select class="custom-select" id="answer-2" style="width:200px">

                            <option selected>Select an Option</option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2 </option>
                            <option value="3">3</option>
                            <option value="4">4 </option>
                            <option value="5">5 (Strongly Agree) </option>
                        </select>
                        <br><br>
                    </div>
                    <div>
                        <h4> Question 3</h4>
                        <h6> * You would rather dine out than cook * </h6>
                        <select class="custom-select " id="answer-3" style="width:200px">

                            <option selected>Select an Option</option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2 </option>
                            <option value="3">3</option>
                            <option value="4">4 </option>
                            <option value="5">5 (Strongly Agree) </option>
                        </select>
                        <br><br>
                    </div>
                    <div>
                        <h4> Question 4</h4>
                        <h6> * Eating healthy is boring *</h6>
                        <select class="custom-select" id="answer-4" style="width:200px">

                            <option selected>Select an Option</option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2 </option>
                            <option value="3">3</option>
                            <option value="4">4 </option>
                            <option value="5">5 (Strongly Agree) </option>
                        </select>
                        <br><br>
                    </div>
                    <div>
                        <h4> Question 5</h4>
                        <h6> * Perfect Date: Walk on the beach *</h6>
                        <select class="custom-select" id="answer-5" style="width:200px">

                            <option selected>Select an Option</option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2 </option>
                            <option value="3">3</option>
                            <option value="4">4 </option>
                            <option value="5">5 (Strongly Agree) </option>
                        </select>
                        <br><br>
                    </div>
                    <div>
                        <h4> Question 6</h4>
                        <h6> * Outdoor activities are amazing *</h6>
                        <select class="custom-select" id="answer-6" style="width:200px">

                            <option selected>Select an Option</option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2 </option>
                            <option value="3">3</option>
                            <option value="4">4 </option>
                            <option value="5">5 (Strongly Agree) </option>
                        </select>
                        <br><br>
                    </div>
                    <div>
                        <h4> Question 7</h4>
                        <h6> * Going to the movies is an ideal night out *</h6>
                        <select class="custom-select" id="answer-7" style="width:200px">

                            <option selected>Select an Option</option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2 </option>
                            <option value="3">3</option>
                            <option value="4">4 </option>
                            <option value="5">5 (Strongly Agree) </option>
                        </select>
                        <br><br>
                    </div>
                    <div>
                        <h4> Question 8</h4>
                        <h6> * You would rather go shopping than a walk in the park *</h6>
                        <select class="custom-select" id="answer-8" style="width:200px">

                            <option selected>Select an Option</option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2 </option>
                            <option value="3">3</option>
                            <option value="4">4 </option>
                            <option value="5">5 (Strongly Agree) </option>
                        </select>
                        <br><br>
                    </div>
                    <div>
                        <h4> Question 9</h4>
                        <h6> * People think you're funny *</h6>
                        <select class="custom-select" id="answer-9" style="width:200px">

                            <option selected>Select an Option</option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2 </option>
                            <option value="3">3</option>
                            <option value="4">4 </option>
                            <option value="5">5 (Strongly Agree) </option>
                        </select>
                        <br><br>
                    </div>
                    <div>
                        <h4> Question 10</h4>
                        <h6> * You would rather go to a concert than an open mic night *</h6>
                        <select class="custom-select" id="answer-10" style="width:200px">

                            <option selected>Select an Option</option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2 </option>
                            <option value="3">3</option>
                            <option value="4">4 </option>
                            <option value="5">5 (Strongly Agree) </option>
                        </select>
                        <br><br>
                    </div>

                    <button class="btn btn-primary" id="submit-button" type="submit">Submit Survey</button>
                </form>

            </div>
        </div>

        <div>

            <a href="/api/friends"> View Api friends</a> | <a href="https://github.com/dsolomon4/friend_finder"> GitHub Repo</a>

        </div>

        <div id="myModal" class="modal">

            <!-- Modal content -->
            <div class="modal-content">                   
                <span class="close">&times;</span>
                <h2 class="modal-title"><strong>Here is your Best Match!</strong></h2>
                <hr>
                <h3 id="matchName"> </h3>
                <img id="matchImg" src="" alt="Match Photo" >
                
            </div>
          
          </div>
<style>

.modal-content{
    text-align: center
}

img{
    margin: 50px 225px;
}
/* The Modal (background) */
.modal {
    display: none; /* Hidden by default */
    position: fixed; /* Stay in place */
    z-index: 1; /* Sit on top */
    left: 0;
    top: 0;
    width: 100%; /* Full width */
    height: 100%; /* Full height */
    overflow: auto; /* Enable scroll if needed */
    background-color: rgb(0,0,0); /* Fallback color */
    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
}

/* Modal Content/Box */
.modal-content {
    background-color: #fefefe;
    margin: 15% auto; /* 15% from the top and centered */
    padding: 20px;
    border: 1px solid #888;
    width: 80%; /* Could be more or less, depending on screen size */
}

/* The Close Button */
.close {
    color: #aaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
}

.close:hover,
.close:focus {
    color: black;
    text-decoration: none;
    cursor: pointer;
}
</style>

    </div>




    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
        crossorigin="anonymous"></script>


    <script>
        $("#submit-button").on("click", function (event) {
            event.preventDefault();


            function createFriends() {
                var isValid = true;
                $('.form-control').each(function () {
                    if ($(this).val() === '')
                        isValid = false;
                });
                return isValid;
            }
            // If all required fields are filled
            if (createFriends() == true) {
                console.log("valid");
                // Create an object for the user's data
                var newFriends = {
                    name: $("#nameInput").val().trim(),
                    photo: $("#imageInput").val().trim(),
                    scores: [$("#answer-1").val(), $("#answer-2").val(), $("#answer-3").val(), $(
                        "#answer-4").val(), $("#answer-5").val(), $("#answer-6").val(), $(
                        "#answer-7").val(), $("#answer-8").val(), $("#answer-9").val(), $(
                        "#answer-10").val(), ]
                }
                
                document.getElementById("survey-form").reset();

                console.log("new friend added" + newFriends.name)

                var currentURL = window.location.origin;

                // Get the modal
var modal = document.getElementById('myModal');


// Get the <span> element that closes the modal
var span = document.getElementsByClassName("close")[0];

// When the user clicks on the button, open the modal 
    console.log("woe is me")
    modal.style.display = "block";


// When the user clicks on <span> (x), close the modal
span.onclick = function() {
    modal.style.display = "none";
}

// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
    if (event.target == modal) {
        modal.style.display = "none";
    }
}

                $.post(currentURL + "/api/friends", newFriends, function (data) {

                    // $("#matchNameTest").text(data.name);
                    // $('#matchImgTest').attr("src", data.photo);
                    // $('#matchImgTest').attr("height", 200);


                    $("#matchName").text(data.name);
                    $('#matchImg').attr("src", data.photo);
                    $('#matchImg').attr("height", 200);
                    $('#matchImg').attr("width", 200);

                    console.log("this is your match" + data.name)
                });
            } else {
                alert("Please fill out all fields before submitting!");
            }


        });





        $("#close").on("click", function () {
            $("#resultsModal").hide();
        });
    </script>
</body>

</html>